
@{
    ViewBag.Title = "_createEvent";
}

<div id="createEvent" class="modal" ng-app="event" ng-controller="EventController as eventCtrl">
<!-- Modal content -->
    <div class="modal-content">

        <div class="modal-header">
            <span class="close">&times;</span>
            <h2>Modal Header</h2>
        </div>
        <div class="modal-body">
            <form name="eventForm" method="post" novalidate>
                <fieldset class="form-group">
                    <div class="col-md-2">
                        <label>Wähle einen Typ</label>
                        <select class="form-control" ng-model="event.typ">
                            <option value="raid">Raid</option>
                            <option value="frac">Fraktale</option>
                            <option value="sonst">Sonstiges</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label>Bezeichnung:</label>
                        <input type="text" ng-model="event.title" class="form-control" @*placeholder="Hier Titel eingeben..." title="Titel" id="cname"*@ />
                    </div>
                </fieldset>
                <fieldset class="form-group">
                    <div class="col-md-2">
                        <label>Von:</label>
                        <input type="text" ng-model="event.von" id="cvon" class="timepicker" />
                    </div>
                    <div class="col-md-2">
                        <label>Bis:</label>
                        <input type="text" ng-model="event.bis" id="cbis" class="timepicker" />
                    </div>
                </fieldset>
                <fieldset class="form-group">
                    <label>character</label>
                    <ul>
                        <li>
                            <label style="width:80px;">PS</label> 
                            <input type="number" ng-model="event.character.ps" style="width:auto;display:inline;" @*id="count_ps"*@ class="form-control bfh-number" min="0" max="10" value="0" />
                        </li>
                        <li>
                            <label style="width:80px;">C-PS</label>
                            <input type="number" ng-model="event.character.cps" style="width:auto;display:inline;" @*id="count_cps"*@ class="form-control bfh-number" min="0" max="10" value="0" />
                        </li>
                        <li>
                            <label style="width:80px;">C-Ranger</label>
                            <input type="number" ng-model="event.character.cranger" style="width:auto;display:inline;" @*id="count_cranger"*@ class="form-control bfh-number" min="0" max="10" value="0" />
                        </li>
                        <li>
                            <label style="width:80px;">C-Druid</label>
                            <input type="number" ng-model="event.character.cdruid" style="width:auto;display:inline;" @*id="count_cdruid"*@ class="form-control bfh-number" min="0" max="10" value="0" />
                        </li>
                        <li>
                            <label style="width:80px;">Magi-Druid</label>
                            <input type="number" ng-model="event.character.magidruid" style="width:auto;display:inline;" @*id="count_magidruid"*@ class="form-control bfh-number" min="0" max="10" value="0" />
                        </li>
                        <li>
                            <label style="width:80px;">Chrono</label>
                            <input type="number" ng-model="event.character.chrono" style="width:auto;display:inline;" @*id="count_chrono"*@ class="form-control bfh-number" min="0" max="10" value="0" />
                        </li>
                        <li>
                            <label style="width:80px;">Magi-Druid</label>
                            <input type="number" ng-model="event.character.tempest" style="width:auto;display:inline;" @*id="count_tempest"*@ class="form-control bfh-number" min="0" max="10" value="0" />
                        </li>
                    </ul>
                </fieldset>
                <fieldset class="form-group">
                    <input type="button" ng-click="reset()" class="btn btn-primary pull-right" value="Zurücksetzen" id="reset"/>
                    <input @*type="submit"*@ ng-click="update(event)" class="btn btn-primary pull-right" value="Speichern" @*id="send"*@ />
                </fieldset>
            </form>
    </div>
        <div class="modal-footer">
            <p>form = {{event}}</p>
            <p>master = {{master}}</p>
            <h3>Modal Footer</h3>
        </div>
    </div>

</div>
<script>
    var eventApp = angular.module('event', []);
    eventApp.controller('EventController', ['$scope', function ($scope) {
        $scope.master = {};
        console.log("im angular controller");
        $scope.update = function (event) {
            $scope.master = angular.copy(event);
            $('#calendar').fullCalendar('addEventSource', function (start, end) {
                console.log(start);
                console.log(" addEventSource calender in angular");
                //eventData = {
                //    title: $("#cname").val(),
                //    start: start,
                //    end: end,
                //    von: $("#cvon").val(),
                //    bis: $("#cbis").val()
                //};
                //Merged das event object aus der form
                //und die parameter start und end aus dem calender
                var eventNew = $.extend(true, this.settings, event,{ start: start, end: end });
                //event.push(end);
                console.log("data is:");
                //event = event + start;
                console.log(eventNew)
                //$('#calendar').fullCalendar('renderEvent', eventNew, true); // stick? = true

                //$('#calendar').fullCalendar('unselect');
                ////Close the Window and reset the create form
                //$("#createEvent").css("display", "none");
            });
        };

        $scope.reset = function () {
            $scope.event = angular.copy($scope.master);
            //reset all inputs
            $scope.searchAll = null;
        };

        $scope.reset();
    }]);
</script>


